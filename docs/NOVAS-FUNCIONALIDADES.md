# 🚀 NOVAS FUNCIONALIDADES - CHECKNOW

**Data:** 21/10/2025 | **Versão:** 1.0

---

## 📋 ÍNDICE

1. [Tutorial Interativo](#1-tutorial-interativo)
2. [Sistema de Fila](#2-sistema-de-fila)
3. [Verificação de Imagens](#3-verificação-de-imagens)

---

## 🎯 ORDEM DE IMPLEMENTAÇÃO (POR COMPLEXIDADE)

### ✅ FASE 1 - FÁCIL (1-2 dias)
**Tutorial Interativo**

### ⚠️ FASE 2 - MÉDIA (3-5 dias)
**Sistema de Fila de Processamento**

### 🔥 FASE 3 - COMPLEXA (7-10 dias)
**Verificação de Imagens com IA**

---

# 1. TUTORIAL INTERATIVO COMPLETO

## 📖 Descrição
Tutorial ÉPICO e gamificado que passa por TODAS as funcionalidades do app. Aparece após clicar "Começar" na última tela do onboarding. Sistema progressivo com recompensas a cada etapa.

## 🎯 Objetivos
- ✅ Ensinar TODAS as funcionalidades
- ✅ Gamificar completamente a primeira experiência
- ✅ Sistema de badges e conquistas
- ✅ Recompensas incrementais
- ✅ Criar senso de progressão
- ✅ Aumentar engajamento em 300%+

## 🎮 SISTEMA DE GAMIFICAÇÃO

### Níveis de Tutorial
```
Nível 1: Verificador Iniciante    (Passos 1-4)   → Badge Bronze
Nível 2: Explorador               (Passos 5-8)   → Badge Prata
Nível 3: Estudante Digital        (Passos 9-12)  → Badge Ouro
Nível 4: Mestre CheckNow          (Passos 13-15) → Badge Diamante
```

### Recompensas Progressivas
- ✅ +1 verificação extra (Nível 1)
- ✅ +2 verificações extras (Nível 2)
- ✅ +3 verificações extras (Nível 3)
- ✅ 3 dias de Premium GRÁTIS (Nível 4)

### Barra de Progresso
```
[████████░░░░░░░░] 8/15 passos (53%)
```

## 🎨 FLUXO COMPLETO (15 PASSOS)

### 🥉 NÍVEL 1: VERIFICADOR INICIANTE

#### **Passo 1: Boas-vindas**
```
┌─────────────────────────────────┐
│  🎓 Tutorial Completo CheckNow  │
│                                 │
│  Você está prestes a se tornar  │
│  um MESTRE em verificação de    │
│  notícias!                      │
│                                 │
│  📊 15 passos para dominar      │
│  🏆 4 badges para desbloquear   │
│  🎁 Recompensas em cada nível   │
│                                 │
│  [Começar Jornada] [Pular]      │
└─────────────────────────────────┘
```

#### **Passo 2: Verificação - Texto**
```
┌─────────────────────────────────┐
│  📝 Sua Primeira Verificação    │
│  [████░░░░░░░░░░░] 1/15         │
│                                 │
│  ┌─────────────────────────┐   │
│  │ Cole ou digite aqui     │   │ ← SPOTLIGHT
│  └─────────────────────────┘   │
│                                 │
│  💡 Experimente com esta:       │
│  "Governo anuncia que vai       │
│   distribuir vacina contra      │
│   câncer gratuitamente"         │
│                                 │
│  [📋 Copiar Exemplo]            │
│  [Próximo quando verificar]     │
└─────────────────────────────────┘
```

#### **Passo 3: Verificação - URL**
```
┌─────────────────────────────────┐
│  🔗 Verificação de Links        │
│  [████████░░░░░░░] 2/15         │
│                                 │
│  Você também pode verificar     │
│  links de notícias!             │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 🔗 Botão URL aqui       │   │ ← SPOTLIGHT
│  └─────────────────────────┘   │
│                                 │
│  💡 Cole qualquer link de       │
│     notícia e veja a mágica!    │
│                                 │
│  [Próximo]                      │
└─────────────────────────────────┘
```

#### **Passo 4: Entendendo Resultados**
```
┌─────────────────────────────────┐
│  🎯 Tipos de Resultado          │
│  [████████████░░░] 3/15         │
│                                 │
│  ✅ VERDADEIRO                  │
│  Notícia confirmada             │
│                                 │
│  ❌ FALSO                       │
│  Fake news detectada            │
│                                 │
│  ⚠️ INDETERMINADO               │
│  Precisa de mais contexto       │
│                                 │
│  💡 Role para baixo e veja      │
│     as FONTES e ANÁLISE         │
│                                 │
│  [Próximo] [Ver Exemplo]        │
└─────────────────────────────────┘
```

**🎉 CONQUISTA DESBLOQUEADA!**
```
┌─────────────────────────────────┐
│  🥉 NÍVEL 1 COMPLETO!           │
│                                 │
│  🏆 Badge: VERIFICADOR INICIANTE│
│  🎁 Recompensa: +1 verificação  │
│                                 │
│  [████░░░░░░░░░░░] 4/15         │
│                                 │
│  [Continuar para Nível 2]       │
└─────────────────────────────────┘
```

---

### 🥈 NÍVEL 2: EXPLORADOR

#### **Passo 5: Histórico Pessoal**
```
┌─────────────────────────────────┐
│  📚 Seu Histórico               │
│  [████████████████░] 5/15       │
│                                 │
│  Todas suas verificações        │
│  ficam salvas aqui!             │
│                                 │
│  ┌───────────────────────┐     │
│  │ 📱 Tab HISTÓRICO      │     │ ← SPOTLIGHT
│  └───────────────────────┘     │
│                                 │
│  💡 Toque para ver:             │
│  • Suas verificações passadas   │
│  • Datas e horários             │
│  • Status de cada análise       │
│                                 │
│  [Ir para Histórico]            │
└─────────────────────────────────┘
```

#### **Passo 6: Histórico Comunitário**
```
┌─────────────────────────────────┐
│  🌍 Histórico Comunitário       │
│  [████████████████████░] 6/15   │
│                                 │
│  Veja o que OUTROS usuários     │
│  estão verificando!             │
│                                 │
│  ┌───────────────────────┐     │
│  │ 🔄 Botão toggle       │     │ ← SPOTLIGHT
│  │ "Meu" ⟷ "Comunidade"  │     │
│  └───────────────────────┘     │
│                                 │
│  💡 Descubra trending fakes     │
│     e notícias verificadas      │
│     por milhares de usuários!   │
│                                 │
│  [Trocar para Comunidade]       │
└─────────────────────────────────┘
```

#### **Passo 7: Feed de Notícias**
```
┌─────────────────────────────────┐
│  📰 Central de Notícias         │
│  [████████████████████████░] 7/15│
│                                 │
│  Notícias verificadas do Brasil!│
│                                 │
│  ┌───────────────────────┐     │
│  │ 📰 Tab NOTÍCIAS       │     │ ← SPOTLIGHT
│  └───────────────────────┘     │
│                                 │
│  💡 Você pode:                  │
│  • Ler notícias confiáveis      │
│  • Puxar para atualizar         │
│  • Tocar para ler completa      │
│  • Verificar qualquer uma!      │
│                                 │
│  [Ir para Feed]                 │
└─────────────────────────────────┘
```

#### **Passo 8: Lendo Notícia**
```
┌─────────────────────────────────┐
│  📖 Detalhes da Notícia         │
│  [████████████████████████████░] 8/15│
│                                 │
│  Toque em qualquer notícia      │
│  para ler o conteúdo completo!  │
│                                 │
│  💡 Dentro você encontra:       │
│  • Título e fonte               │
│  • Resumo completo              │
│  • Data de publicação           │
│  • Link para site original      │
│                                 │
│  [Próximo]                      │
└─────────────────────────────────┘
```

**🎉 CONQUISTA DESBLOQUEADA!**
```
┌─────────────────────────────────┐
│  🥈 NÍVEL 2 COMPLETO!           │
│                                 │
│  🏆 Badge: EXPLORADOR           │
│  🎁 Recompensa: +2 verificações │
│                                 │
│  [████████░░░░░░] 8/15          │
│                                 │
│  [Continuar para Nível 3]       │
└─────────────────────────────────┘
```

---

### 🥇 NÍVEL 3: ESTUDANTE DIGITAL

#### **Passo 9: Área de Educação**
```
┌─────────────────────────────────┐
│  📚 Educação Digital            │
│  [████████████████████████████████░] 9/15│
│                                 │
│  Aprenda a identificar          │
│  fake news como um PRO!         │
│                                 │
│  ┌───────────────────────┐     │
│  │ 🎓 Ícone Educação     │     │ ← SPOTLIGHT
│  │ (no header)           │     │
│  └───────────────────────┘     │
│                                 │
│  💡 Conteúdo exclusivo:         │
│  • Guias de fact-checking       │
│  • Técnicas de verificação      │
│  • Quiz interativo              │
│  • Certificado CheckNow!        │
│                                 │
│  [Ir para Educação]             │
└─────────────────────────────────┘
```

#### **Passo 10: Seções Educacionais**
```
┌─────────────────────────────────┐
│  📖 Guias Disponíveis           │
│  [████████████████████████████████████░] 10/15│
│                                 │
│  Navegue pelas seções:          │
│                                 │
│  1️⃣ O que é Fake News          │
│  2️⃣ Como Identificar            │
│  3️⃣ Técnicas de Manipulação     │
│  4️⃣ Checklist de Verificação    │
│  5️⃣ Deepfakes e IA              │
│                                 │
│  💡 Leia pelo menos uma         │
│     seção para continuar!       │
│                                 │
│  [Marcar como Lido]             │
└─────────────────────────────────┘
```

#### **Passo 11: Quiz Interativo**
```
┌─────────────────────────────────┐
│  🎯 Teste Seus Conhecimentos    │
│  [████████████████████████████████████████░] 11/15│
│                                 │
│  Hora de mostrar o que aprendeu!│
│                                 │
│  ┌───────────────────────┐     │
│  │ 🎮 Iniciar Quiz       │     │ ← SPOTLIGHT
│  └───────────────────────┘     │
│                                 │
│  📊 Quiz contém:                │
│  • 10 perguntas                 │
│  • Múltipla escolha             │
│  • Feedback imediato            │
│  • Pontuação final              │
│                                 │
│  🏆 Mínimo 70% para passar      │
│                                 │
│  [Começar Quiz]                 │
└─────────────────────────────────┘
```

#### **Passo 12: Completando Quiz**
```
┌─────────────────────────────────┐
│  📊 Resultado do Quiz           │
│  [████████████████████████████████████████████░] 12/15│
│                                 │
│  🎉 Parabéns!                   │
│  Você acertou 8/10 (80%)        │
│                                 │
│  ✅ APROVADO!                   │
│                                 │
│  💡 Você pode refazer o         │
│     quiz quantas vezes quiser   │
│     para melhorar sua nota!     │
│                                 │
│  📜 Badge Educacional           │
│     desbloqueado!               │
│                                 │
│  [Próximo]                      │
└─────────────────────────────────┘
```

**🎉 CONQUISTA DESBLOQUEADA!**
```
┌─────────────────────────────────┐
│  🥇 NÍVEL 3 COMPLETO!           │
│                                 │
│  🏆 Badge: ESTUDANTE DIGITAL    │
│  🎁 Recompensa: +3 verificações │
│                                 │
│  [████████████░░] 12/15         │
│                                 │
│  [Continuar para Nível 4]       │
└─────────────────────────────────┘
```

---

### 💎 NÍVEL 4: MESTRE CHECKNOW

#### **Passo 13: Conta e Configurações**
```
┌─────────────────────────────────┐
│  ⚙️ Personalize Sua Experiência │
│  [████████████████████████████████████████████████░] 13/15│
│                                 │
│  ┌───────────────────────┐     │
│  │ 👤 Tab CONTA          │     │ ← SPOTLIGHT
│  └───────────────────────┘     │
│                                 │
│  💡 Aqui você pode:             │
│  • Ver seu perfil               │
│  • Alterar tema (claro/escuro)  │
│  • Gerenciar conta Premium      │
│  • Ajustar consentimentos       │
│  • Ver estatísticas             │
│                                 │
│  [Ir para Conta]                │
└─────────────────────────────────┘
```

#### **Passo 14: Temas (Dark Mode)**
```
┌─────────────────────────────────┐
│  🌓 Modo Escuro                 │
│  [████████████████████████████████████████████████████░] 14/15│
│                                 │
│  Proteja seus olhos!            │
│                                 │
│  ┌───────────────────────┐     │
│  │ 🌙 Toggle Tema        │     │ ← SPOTLIGHT
│  └───────────────────────┘     │
│                                 │
│  💡 Experimente trocar entre:   │
│  ☀️ Modo Claro (dia)            │
│  🌙 Modo Escuro (noite)         │
│                                 │
│  Salva automaticamente sua      │
│  preferência!                   │
│                                 │
│  [Trocar Tema] [Próximo]        │
└─────────────────────────────────┘
```

#### **Passo 15: Premium & Finalização**
```
┌─────────────────────────────────┐
│  ⭐ CheckNow Premium             │
│  [████████████████████████████████████████████████████████] 15/15│
│                                 │
│  🎁 Seu presente especial:      │
│  3 DIAS DE PREMIUM GRÁTIS!      │
│                                 │
│  ✅ Verificações ilimitadas     │
│  ✅ Sem anúncios                │
│  ✅ Suporte prioritário         │
│  ✅ Acesso antecipado           │
│                                 │
│  💡 Você ganhou por completar   │
│     todo o tutorial!            │
│                                 │
│  [Ativar Premium]               │
└─────────────────────────────────┘
```

**🎊 TUTORIAL COMPLETO!**
```
┌─────────────────────────────────┐
│  💎 MESTRE CHECKNOW!            │
│                                 │
│  🎉 PARABÉNS!                   │
│  Você dominou todas as          │
│  funcionalidades do app!        │
│                                 │
│  🏆 Badges Conquistados:        │
│  🥉 Verificador Iniciante       │
│  🥈 Explorador                  │
│  🥇 Estudante Digital           │
│  💎 Mestre CheckNow             │
│                                 │
│  🎁 Recompensas Totais:         │
│  • +6 verificações extras       │
│  • 3 dias Premium GRÁTIS        │
│  • Certificado de Conclusão     │
│                                 │
│  [🎊 Começar a Usar!]           │
│  [📥 Baixar Certificado]        │
└─────────────────────────────────┘
```

## 🛠️ IMPLEMENTAÇÃO TÉCNICA DETALHADA

### Arquivos Novos/Modificados
```
contexts/
  ├── TutorialContext.tsx              [NOVO]
  ├── BadgeContext.tsx                 [NOVO]

components/
  ├── tutorial/
  │   ├── TutorialOverlay.tsx          [NOVO]
  │   ├── TutorialStep.tsx             [NOVO]
  │   ├── TutorialSpotlight.tsx        [NOVO]
  │   ├── TutorialProgressBar.tsx      [NOVO]
  │   ├── TutorialLevelComplete.tsx    [NOVO]
  │   ├── TutorialFinalModal.tsx       [NOVO]
  │   └── TutorialBadge.tsx            [NOVO]
  ├── badges/
  │   ├── BadgeCard.tsx                [NOVO]
  │   └── BadgeList.tsx                [NOVO]
  ├── certificates/
  │   └── Certificate.tsx              [NOVO]

types/
  ├── tutorial.types.ts                [NOVO]
  ├── badge.types.ts                   [NOVO]

app/
  ├── (tabs)/index.tsx                 [MODIFICAR]
  ├── (tabs)/account.tsx               [MODIFICAR - mostrar badges]
  └── onboarding.tsx                   [MODIFICAR]
```

### Tipos TypeScript Completos

```typescript
// types/tutorial.types.ts

export type TutorialLevel = 1 | 2 | 3 | 4;

export type TutorialStepId = 
  | 'welcome'
  | 'verify_text'
  | 'verify_url'
  | 'results'
  | 'history'
  | 'community'
  | 'feed'
  | 'news_detail'
  | 'education'
  | 'education_sections'
  | 'quiz'
  | 'quiz_complete'
  | 'account'
  | 'theme'
  | 'premium';

export interface TutorialState {
  isActive: boolean;
  currentStep: TutorialStepId;
  currentStepIndex: number;
  totalSteps: number;
  currentLevel: TutorialLevel;
  completed: boolean;
  skipped: boolean;
  startedAt?: number;
  completedAt?: number;
  levelsCompleted: TutorialLevel[];
}

export interface TutorialStepConfig {
  id: TutorialStepId;
  level: TutorialLevel;
  stepInLevel: number;
  title: string;
  description: string;
  targetComponent?: string;
  targetScreen?: 'home' | 'history' | 'feed' | 'education' | 'account';
  position: 'top' | 'center' | 'bottom';
  spotlightRadius?: number;
  requiresAction?: boolean; // Usuário precisa fazer algo
  actionType?: 'tap' | 'input' | 'navigation';
  skipable: boolean;
  tips?: string[];
}

export interface TutorialLevelReward {
  level: TutorialLevel;
  badgeId: string;
  verificationCredits: number;
  premiumDays?: number;
  unlocks?: string[];
}

export interface TutorialProgress {
  stepsCompleted: TutorialStepId[];
  timeSpent: number; // milliseconds
  actionsCompleted: string[];
}
```

```typescript
// types/badge.types.ts

export type BadgeRarity = 'common' | 'rare' | 'epic' | 'legendary';

export interface Badge {
  id: string;
  name: string;
  description: string;
  icon: string; // emoji ou image path
  rarity: BadgeRarity;
  category: 'tutorial' | 'verification' | 'education' | 'community' | 'premium';
  earnedAt?: number;
  progress?: number; // 0-100
  requirement?: string;
}

export interface BadgeCollection {
  userId: string;
  badges: Badge[];
  totalEarned: number;
  nextToUnlock?: Badge;
}
```

### Context de Tutorial Completo

```typescript
// contexts/TutorialContext.tsx

import React, { createContext, useContext, useState, useEffect } from 'react';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { TutorialState, TutorialStepConfig, TutorialLevelReward } from '@/types/tutorial.types';

interface TutorialContextType {
  state: TutorialState;
  startTutorial: () => void;
  nextStep: () => void;
  previousStep: () => void;
  skipTutorial: () => void;
  skipStep: () => void;
  completeTutorial: () => void;
  completeLevel: (level: TutorialLevel) => void;
  resetTutorial: () => void;
  currentStepConfig: TutorialStepConfig | null;
  progressPercentage: number;
  currentLevelReward: TutorialLevelReward | null;
}

const TUTORIAL_STEPS: TutorialStepConfig[] = [
  // Nível 1
  {
    id: 'welcome',
    level: 1,
    stepInLevel: 1,
    title: 'Bem-vindo ao Tutorial!',
    description: '15 passos para dominar o CheckNow',
    position: 'center',
    skipable: true
  },
  {
    id: 'verify_text',
    level: 1,
    stepInLevel: 2,
    title: 'Verificar Texto',
    description: 'Cole ou digite uma notícia para verificar',
    targetComponent: 'verifyInput',
    targetScreen: 'home',
    position: 'top',
    spotlightRadius: 80,
    requiresAction: true,
    actionType: 'input',
    skipable: false
  },
  // ... mais 13 steps ...
];

const LEVEL_REWARDS: TutorialLevelReward[] = [
  {
    level: 1,
    badgeId: 'verificador_iniciante',
    verificationCredits: 1
  },
  {
    level: 2,
    badgeId: 'explorador',
    verificationCredits: 2
  },
  {
    level: 3,
    badgeId: 'estudante_digital',
    verificationCredits: 3
  },
  {
    level: 4,
    badgeId: 'mestre_checknow',
    verificationCredits: 0,
    premiumDays: 3,
    unlocks: ['certificate']
  }
];

export const TutorialContext = createContext<TutorialContextType | undefined>(undefined);

export function TutorialProvider({ children }: { children: React.ReactNode }) {
  const [state, setState] = useState<TutorialState>({
    isActive: false,
    currentStep: 'welcome',
    currentStepIndex: 0,
    totalSteps: TUTORIAL_STEPS.length,
    currentLevel: 1,
    completed: false,
    skipped: false,
    levelsCompleted: []
  });

  // Carrega estado do AsyncStorage
  useEffect(() => {
    loadTutorialState();
  }, []);

  const loadTutorialState = async () => {
    const saved = await AsyncStorage.getItem('@checknow:tutorial_state');
    if (saved) {
      setState(JSON.parse(saved));
    }
  };

  const saveTutorialState = async (newState: TutorialState) => {
    await AsyncStorage.setItem('@checknow:tutorial_state', JSON.stringify(newState));
  };

  const startTutorial = () => {
    const newState = {
      ...state,
      isActive: true,
      startedAt: Date.now()
    };
    setState(newState);
    saveTutorialState(newState);
  };

  const nextStep = () => {
    const nextIndex = state.currentStepIndex + 1;
    
    if (nextIndex >= TUTORIAL_STEPS.length) {
      completeTutorial();
      return;
    }

    const nextStepConfig = TUTORIAL_STEPS[nextIndex];
    const newState = {
      ...state,
      currentStepIndex: nextIndex,
      currentStep: nextStepConfig.id,
      currentLevel: nextStepConfig.level
    };

    setState(newState);
    saveTutorialState(newState);

    // Verifica se completou um nível
    checkLevelCompletion(nextStepConfig.level);
  };

  const checkLevelCompletion = (level: TutorialLevel) => {
    const currentLevelSteps = TUTORIAL_STEPS.filter(s => s.level === level);
    const completedInLevel = currentLevelSteps.filter(
      s => TUTORIAL_STEPS.findIndex(st => st.id === s.id) <= state.currentStepIndex
    );

    if (completedInLevel.length === currentLevelSteps.length && 
        !state.levelsCompleted.includes(level)) {
      completeLevel(level);
    }
  };

  const completeLevel = async (level: TutorialLevel) => {
    const reward = LEVEL_REWARDS.find(r => r.level === level);
    
    if (reward) {
      // Adiciona badge
      await addBadge(reward.badgeId);
      
      // Adiciona créditos de verificação
      await addVerificationCredits(reward.verificationCredits);
      
      // Ativa premium se houver
      if (reward.premiumDays) {
        await activatePremiumTrial(reward.premiumDays);
      }
    }

    const newState = {
      ...state,
      levelsCompleted: [...state.levelsCompleted, level]
    };

    setState(newState);
    saveTutorialState(newState);
  };

  const completeTutorial = async () => {
    const newState = {
      ...state,
      isActive: false,
      completed: true,
      completedAt: Date.now()
    };

    setState(newState);
    saveTutorialState(newState);

    // Gera certificado
    await generateCertificate();
  };

  const skipTutorial = async () => {
    const newState = {
      ...state,
      isActive: false,
      skipped: true
    };

    setState(newState);
    saveTutorialState(newState);
  };

  const currentStepConfig = TUTORIAL_STEPS[state.currentStepIndex] || null;
  const progressPercentage = (state.currentStepIndex / state.totalSteps) * 100;
  const currentLevelReward = LEVEL_REWARDS.find(r => r.level === state.currentLevel) || null;

  return (
    <TutorialContext.Provider value={{
      state,
      startTutorial,
      nextStep,
      previousStep,
      skipTutorial,
      skipStep,
      completeTutorial,
      completeLevel,
      resetTutorial,
      currentStepConfig,
      progressPercentage,
      currentLevelReward
    }}>
      {children}
    </TutorialContext.Provider>
  );
}

export const useTutorial = () => {
  const context = useContext(TutorialContext);
  if (!context) throw new Error('useTutorial must be used within TutorialProvider');
  return context;
};
```

### Sistema de Badges

```typescript
// contexts/BadgeContext.tsx

export const BADGES: Badge[] = [
  {
    id: 'verificador_iniciante',
    name: 'Verificador Iniciante',
    description: 'Completou o Nível 1 do tutorial',
    icon: '🥉',
    rarity: 'common',
    category: 'tutorial'
  },
  {
    id: 'explorador',
    name: 'Explorador',
    description: 'Completou o Nível 2 do tutorial',
    icon: '🥈',
    rarity: 'rare',
    category: 'tutorial'
  },
  {
    id: 'estudante_digital',
    name: 'Estudante Digital',
    description: 'Completou o Nível 3 do tutorial',
    icon: '🥇',
    rarity: 'epic',
    category: 'tutorial'
  },
  {
    id: 'mestre_checknow',
    name: 'Mestre CheckNow',
    description: 'Dominou todas as funcionalidades!',
    icon: '💎',
    rarity: 'legendary',
    category: 'tutorial'
  }
];
```

### Componente de Certificado

```typescript
// components/certificates/Certificate.tsx

interface CertificateProps {
  userName: string;
  completedAt: Date;
  tutorialDuration: number;
}

export function Certificate({ userName, completedAt, tutorialDuration }: CertificateProps) {
  return (
    <View style={styles.certificate}>
      <Text style={styles.title}>Certificado de Conclusão</Text>
      <Text style={styles.subtitle}>CheckNow - Verificador de Notícias</Text>
      
      <Text style={styles.body}>
        Certificamos que
      </Text>
      <Text style={styles.userName}>{userName}</Text>
      <Text style={styles.body}>
        completou com sucesso o Tutorial Completo do CheckNow,
        demonstrando domínio em técnicas de fact-checking
        e verificação de notícias.
      </Text>
      
      <Text style={styles.date}>
        {completedAt.toLocaleDateString('pt-BR')}
      </Text>
      
      <Text style={styles.footer}>
        Etec Taboão da Serra - 2025
      </Text>
      
      <TouchableOpacity onPress={downloadPDF}>
        <Text>📥 Baixar PDF</Text>
      </TouchableOpacity>
      
      <TouchableOpacity onPress={shareOnLinkedIn}>
        <Text>💼 Compartilhar no LinkedIn</Text>
      </TouchableOpacity>
    </View>
  );
}
```

## 📦 DEPENDÊNCIAS

```json
{
  "react-native-confetti-cannon": "^1.5.2",
  "react-native-svg": "^13.9.0",
  "react-native-view-shot": "^3.8.0",
  "react-native-share": "^10.0.2"
}
```

## 💾 PERSISTÊNCIA

### AsyncStorage Keys
```typescript
'@checknow:tutorial_state'          // TutorialState completo
'@checknow:tutorial_completed'      // boolean
'@checknow:tutorial_started_at'     // timestamp
'@checknow:badges_earned'           // Badge[]
'@checknow:verification_credits'    // number
'@checknow:certificate_generated'   // boolean
```

### Supabase (Opcional)
```sql
ALTER TABLE profiles ADD COLUMN tutorial_completed BOOLEAN DEFAULT false;
ALTER TABLE profiles ADD COLUMN tutorial_completed_at TIMESTAMPTZ;
ALTER TABLE profiles ADD COLUMN tutorial_duration INTEGER; -- segundos
ALTER TABLE profiles ADD COLUMN badges_earned JSONB DEFAULT '[]'::jsonb;

CREATE TABLE user_badges (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES profiles(id),
  badge_id TEXT NOT NULL,
  earned_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, badge_id)
);
```

## ✅ CHECKLIST COMPLETO

### Fase 1: Setup (Dia 1)
- [ ] Criar todos os tipos TypeScript
- [ ] Criar TutorialContext com estado completo
- [ ] Criar BadgeContext
- [ ] Setup AsyncStorage
- [ ] Definir todos os 15 steps

### Fase 2: Componentes (Dia 2)
- [ ] TutorialOverlay
- [ ] TutorialSpotlight (SVG mask)
- [ ] TutorialProgressBar
- [ ] TutorialStep (card de instrução)
- [ ] TutorialLevelComplete (modal de conquista)
- [ ] TutorialFinalModal
- [ ] BadgeCard
- [ ] Certificate

### Fase 3: Integração (Dia 3)
- [ ] Conectar com onboarding
- [ ] Navegação entre telas durante tutorial
- [ ] Sistema de recompensas
- [ ] Geração de certificado
- [ ] Download PDF
- [ ] Compartilhamento LinkedIn

### Fase 4: Polish (Dia 4)
- [ ] Animações suaves
- [ ] Confetti nos níveis
- [ ] Sons (opcional)
- [ ] Testes iOS/Android
- [ ] Ajustes de UI
- [ ] Analytics

---

# 2. SISTEMA DE FILA DE PROCESSAMENTO

## 📖 Descrição
Fila client-side para processar múltiplas verificações simultaneamente, com retry automático e gerenciamento de rate limits.

## 🎯 Objetivos
- Suportar 1000+ verificações simultâneas
- Prevenir crashes por uso intenso
- Gerenciar rate limits de APIs
- Priorizar usuários premium
- Retry automático em falhas

## 🔍 Análise Atual

### Problemas Identificados
```typescript
// ❌ ATUAL: Processamento síncrono
const verifyNews = async () => {
  setIsLoading(true); // Bloqueia UI
  const result = await geminiAI.analyze(); // Sequencial
  setIsLoading(false);
};

// Limitações:
// 1. Apenas 1 verificação por vez
// 2. Sem retry em erro
// 3. Rate limits não gerenciados
// 4. Usuário fica travado esperando
```

## 🛠️ Solução Proposta

### Arquitetura (Client-Side)
```
┌────────────────────────────┐
│  Queue Manager (Local)     │
│                            │
│  Jobs: [1] [2] [3] ...     │
│  Max concurrent: 3         │
│  Priority queue            │
│  Retry on fail (3x)        │
└────────────┬───────────────┘
             │
             ▼
   ┌──────────────────┐
   │  Rate Limiter    │
   │  - Gemini: 50/min│
   │  - Brave: 900/day│
   └──────────────────┘
```

### Arquivos Novos
```
lib/services/QueueService.ts
lib/services/RateLimiter.ts
types/queue.types.ts
```

### Tipos
```typescript
type JobStatus = 'pending' | 'processing' | 'completed' | 'failed' | 'retrying';
type JobPriority = 'low' | 'normal' | 'high' | 'urgent';

interface VerificationJob {
  id: string;
  userId: string;
  content: string;
  type: 'text' | 'url';
  priority: JobPriority;
  status: JobStatus;
  attempts: number;
  maxAttempts: number;
  createdAt: number;
  result?: NewsVerification;
  error?: string;
}

interface QueueConfig {
  maxConcurrent: 3;
  retryAttempts: 3;
  retryDelay: 2000; // ms
  timeout: 30000;   // ms
}
```

### Funcionalidades
- **Fila por prioridade** (Premium > Free)
- **3 verificações simultâneas** (configurável)
- **Retry 3x com exponential backoff** (2s, 4s, 6s)
- **Timeout 30s por verificação**
- **Rate limiting** (Gemini: 50/min, Brave: 900/dia)
- **Event emitter** para notificações
- **Persistência** (AsyncStorage)

### Uso
```typescript
// Adicionar à fila
const jobId = await queueService.enqueue({
  userId: user.id,
  content: newsText,
  type: 'text',
  priority: user.isPremium ? 'high' : 'normal'
});

// Escutar resultado
queueService.on('job:completed', (job) => {
  setVerification(job.result);
});

queueService.on('job:failed', (job) => {
  setError(job.error);
});
```

## ✅ Checklist
- [ ] QueueService implementado
- [ ] RateLimiter implementado
- [ ] Integração com VerificationContext
- [ ] Sistema de prioridades
- [ ] Retry automático
- [ ] Persistência de jobs
- [ ] UI de status da fila
- [ ] Testes de carga (100+ simultâneos)

---

# 3. VERIFICAÇÃO DE IMAGENS

## 📖 Descrição
Verificação de imagens e screenshots de notícias usando IA multimodal (Google Vision + Gemini Vision).

## 🎯 Objetivos
- Verificar imagens compartilhadas
- Detectar manipulações/deepfakes
- Reverse image search
- Análise de contexto visual
- OCR para extrair texto de screenshots

## 🛠️ Implementação

### Arquivos Novos
```
lib/services/ImageVerificationService.ts
lib/services/ReverseImageSearchService.ts
components/verification/ImagePicker.tsx
components/verification/ImageAnalysisResult.tsx
types/image-verification.types.ts
```

### Tipos
```typescript
interface ImageVerification {
  id: string;
  imageUrl: string;
  imageHash: string;
  analysis: {
    isManipulated: boolean;
    confidence: number;
    ocrText?: string;
    reverseSearch: ReverseSearchResult[];
    aiAnalysis: string;
  };
  verificationStatus: VerificationStatus;
  verified_at: string;
}

interface ReverseSearchResult {
  source: string;
  url: string;
  title: string;
  date: string;
  similarity: number;
}
```

### APIs Necessárias
1. **Google Cloud Vision API**
   - OCR (extrair texto)
   - Safe Search (conteúdo)
   - Label Detection

2. **Gemini Vision API**
   - Análise de contexto
   - Detecção de manipulação
   - Verificação de autenticidade

3. **Reverse Image Search**
   - Google Images (via SerpAPI)
   - TinEye API
   - Bing Images

4. **Storage**
   - Supabase Storage para imagens
   - Compressão antes do upload

### Fluxo
```
1. Usuário seleciona imagem (câmera/galeria)
2. Upload para Supabase Storage
3. Compressão e otimização
4. Google Vision: OCR + Labels
5. Gemini Vision: Análise de autenticidade
6. Reverse Image Search
7. Combinar resultados
8. Exibir análise completa
```

### UI/UX
- Botão "Verificar Imagem" na home
- Preview da imagem
- Loading com etapas visíveis
- Resultado com:
  - Status (✅ Autêntica / ⚠️ Suspeita / ❌ Manipulada)
  - Texto extraído (OCR)
  - Fontes encontradas (reverse search)
  - Análise da IA

### Custos Estimados
- Google Vision: $1.50 / 1000 imagens
- Gemini Vision: Similar ao Gemini normal
- SerpAPI: $50/mês (5000 pesquisas)
- Supabase Storage: $0.021/GB

### Limitações
- Imagens até 10MB
- Formatos: JPG, PNG, WEBP
- Free: 3 imagens/dia
- Premium: Ilimitado

## ✅ Checklist
- [ ] Integração Google Cloud Vision
- [ ] Integração Gemini Vision
- [ ] Reverse Image Search (SerpAPI)
- [ ] Upload Supabase Storage
- [ ] Compressão de imagens
- [ ] ImagePicker component
- [ ] Resultado de análise UI
- [ ] Persistência no banco
- [ ] Testes com diversos tipos de imagem

---

## 📊 CRONOGRAMA GERAL

### Semana 1: Tutorial
- Dia 1-2: Implementação completa
- Dia 3: Testes e ajustes

### Semana 2: Fila
- Dia 1-2: QueueService + RateLimiter
- Dia 3-4: Integração e testes
- Dia 5: Otimizações

### Semana 3-4: Imagens
- Dia 1-3: APIs e Storage
- Dia 4-6: UI e componentes
- Dia 7-8: Testes e refinamento
- Dia 9-10: Documentação e polish

**Total: ~25 dias de desenvolvimento**

---

## 💰 CUSTOS ESTIMADOS

### APIs Novas
- Google Cloud Vision: ~$10/mês (testes)
- SerpAPI: $50/mês
- Supabase Storage: $5/mês

**Total adicional: ~$65/mês**

---

## 🎯 PRIORIZAÇÃO FINAL

1. **Tutorial** → Impacto imediato na UX
2. **Fila** → Estabilidade e escalabilidade
3. **Imagens** → Diferencial técnico

---

**FIM DO DOCUMENTO**
